==[http://code.google.com/p/tb-tun/downloads/list Get TB-TUN]==
===Compile===
Download the sourcefile *tb_userspace.c* and compile it by gcc

*# gcc tb_userspace.c -l pthread -o tb_userspace*
===Binary(Recommended)===
I compiled the source file on kernel *2.6.32-trunk-686* with gcc version *4.4.3 20100108*, and the binary file can work well on kernel *2.6.18-128.2.1.el5.028stab064.7*
You can download the binary file *tb_userspace* directly.
==Config and Example==
---- 

You should first know what is 6to4 tunnel(or tunnelbroker). 6to4 encapsulates IPv6 package in IPv4 package. To use 6to4, A relay server and a public IPv4 address for the client is necessary. By default IPv4 address 192.88.99.1 is assigned for relay server and anycasted by ISP. Thus the default IPv6 addressfor the client must be 2002:__IPv4_addr__::__IPv4_addr__. e.g. 2002:0B0B:0B0B::0B0B:0B0B for client IPv4 address 11.11.11.11. You can get your IPv6 address and IPv4 address of the relay server from the tunnelbroker provider or use the default one.

---- 

*The host system must support TUN/TAP device.*

The example below shows how to config a general 6to4 tunnel with client IPv4 address 11.11.11.11

*# setsid ./tb_userspace tb 192.88.99.1 > /dev/null*

*# ifconfig tb up*

*# ifconfig tb inet6 add 2002:0B0B:0B0B::0B0B:0B0B/64*

*# route -A inet6 add ::/0 dev tb*

./tb_userspace takes exactly 2 arguments: the name of device TUN(here is 'tb') and the IPv4 addr(192.88.99.1) of relay server. 

If you are using a different relay server, just change the IPv4 and IPv6 address.
The example below shows how to config a 6to4 tunnel with the relay server IPv4 address 209.51.161.14 and client IPv6 address 2001:470:1f06:794::2/64

*# setsid ./tb_userspace tb 209.51.161.14 > /dev/null*

*# ifconfig tb up*

*# ifconfig tb inet6 add 2001:470:1f06:794::2/64*

*# route -A inet6 add ::/0 dev tb*

And now you can try to ping some IPv6-only hosts:

*# ping6 ipv6.google.com*

*PING ipv6.google.com(vx-in-x67.1e100.net) 56 data bytes*

*64 bytes from vx-in-x67.1e100.net: icmp_seq=1 ttl=55 time=43.0 ms*

*....*